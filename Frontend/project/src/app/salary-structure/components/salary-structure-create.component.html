<div class="modal-overlay">
  <div class="modal-card">
    <!-- FIXED HEADER -->
    <div class="modal-header-fixed">
      <div class="modal-header">
        <h2>Add New Salary Structure</h2>
        <button class="close-btn" (click)="onCancel()">Ã—</button>
      </div>
      <p class="subtitle">Define the salary structure and amounts.</p>
    </div>

    <!-- SCROLLABLE CONTENT -->
    <div class="modal-body-scrollable">
      <form (ngSubmit)="onSubmit()" #f="ngForm">
        <div *ngIf="errorMessage" class="alert alert-error">{{ errorMessage }}</div>

        <h3 class="section-title">Structure Details</h3>

        <div class="row">
          <div class="col">
            <label for="title">Title <span class="required">*</span></label>
            <input type="text" id="title" name="title" [(ngModel)]="salaryStructure.title" required #t="ngModel" />
            <div class="error" *ngIf="t.invalid && t.touched">Title is required</div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="description">Description</label>
            <input type="text" id="description" name="description" [(ngModel)]="salaryStructure.description" />
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="basic">Basic Salary <span class="required">*</span></label>
            <input type="number" id="basic" name="basic" [(ngModel)]="salaryStructure.basic" required min="0"
              #basic="ngModel" />
            <div class="error" *ngIf="basic.invalid && basic.touched">Enter a valid basic salary</div>
          </div>
          <div class="col">
            <label for="hra">HRA <span class="required">*</span></label>
            <input type="number" id="hra" name="hra" [(ngModel)]="salaryStructure.hra" required min="0"
              #hra="ngModel" />
            <div class="error" *ngIf="hra.invalid && hra.touched">Enter a valid HRA</div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="otherAllowances">Other Allowances</label>
            <input type="number" id="otherAllowances" name="otherAllowances"
              [(ngModel)]="salaryStructure.otherAllowances" min="0" />
          </div>
          <div class="col">
            <label for="deductions">Deductions</label>
            <input type="number" id="deductions" name="deductions" [(ngModel)]="salaryStructure.deductions" min="0" />
          </div>
        </div>

        <div class="row">
          <div class="col">
            <div class="total-section">
              <div class="total-label">Net Salary</div>
              <div class="total-value">{{ total | currency : 'INR' }}</div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- FIXED FOOTER -->
    <div class="modal-footer-fixed">
      <button type="button" class="btn cancel" (click)="onCancel()">Cancel</button>
      <button class="btn primary" [disabled]="f.invalid || isLoading">{{ isLoading ? 'Creating...' : 'Create Structure'
        }}</button>
    </div>
  </div>
</div>