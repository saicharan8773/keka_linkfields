<div class="dashboard-container">
  <app-sidebar></app-sidebar>

  <main class="main-content">
    <div class="employee-container">
      <!-- Header -->
      <div class="page-header">
        <div>
          <h1>Employees</h1>
          <p class="subtitle">Manage your organization’s employees</p>
        </div>
      </div>

      <!-- Search and Add Employee Button Row -->
      <div class="search-add-row">
        <div class="search-box">
          <input
            type="text"
            placeholder="Search employees…"
            [(ngModel)]="searchText"
            (input)="onSearch()"
          />
        </div>
        <button class="btn-add-gold" (click)="showAddEmployeeModal = true">
          <span class="plus-sign">+</span> Add Employee
        </button>
        <!-- Add Employee Modal Popup -->
        <div *ngIf="showAddEmployeeModal" class="modal-overlay">
          <div class="modal-card">
            <app-employee-create
              (closeModal)="showAddEmployeeModal = false"
              (employeeAdded)="onEmployeeAdded()"
            ></app-employee-create>
          </div>
        </div>
      </div>

      <!-- Table -->
      <div class="table-wrapper" *ngIf="employees.length > 0">
        <table class="employee-table">
          <thead>
            <tr>
              <th>Employee</th>
              <th>Code</th>
              <th>Department</th>
              <th>Designation</th>
              <th>Location</th>
              <th>Type</th>
              <th>Actions</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let employee of employees">
              <!-- PROFILE + NAME + EMAIL -->
              <td>
                <div class="emp-profile">
                  <div class="avatar">
                    {{ employee.firstName[0] }}{{ employee.lastName[0] }}
                  </div>
                  <div class="emp-info">
                    <div class="name">
                      {{ employee.firstName }} {{ employee.lastName }}
                    </div>
                    <div class="email">{{ employee.workEmail }}</div>
                  </div>
                </div>
              </td>

              <td>
                <span class="code-tag">{{ employee.employeeCode }}</span>
              </td>

              <td>{{ employee.departmentName }}</td>
              <td>{{ employee.designationTitle }}</td>
              <td>{{ employee.locationName }}</td>

              <td>
                <span class="type-tag">Full-time</span>
              </td>

              <!-- ACTIONS -->
              <td class="action-col">
                <button
                  class="icon-btn"
                  [routerLink]="['/employees/details', employee.id]"
                  title="View"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="#283a4d"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z"
                    ></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>

                <button
                  class="icon-btn"
                  [routerLink]="['/employees/edit', employee.id]"
                  title="Edit"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="#283a4d"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M12 20h9"></path>
                    <path
                      d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4 12.5-12.5z"
                    ></path>
                  </svg>
                </button>

                <button
                  class="icon-btn delete"
                  (click)="onDelete(employee.id)"
                  title="Delete"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="#c33"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6l-1 14H6L5 6"></path>
                    <path d="M10 11v6"></path>
                    <path d="M14 11v6"></path>
                    <path d="M9 6V4a1 1 0 011-1h4a1 1 0 011 1v2"></path>
                  </svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div *ngIf="employees.length === 0" class="empty-state">
        <p>No employees found.</p>
      </div>
    </div>
  </main>
</div>
